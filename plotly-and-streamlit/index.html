<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <link href="/bitmoji.ico" rel="icon" type="image/png"/>
  <link href="https://pype.dev/plotly-and-streamlit/amp/" rel="amphtml"/>
  <meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
  <!-- <link rel='stylesheet' href='/fonts.css' />
  <link rel='stylesheet' href='/archive-styles.css' />
  <link rel='stylesheet' href='/article.css' /> -->
  <link href="/main.css" rel="stylesheet"/>
  <link as="style" href="/one-dark.min.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
  <link as="style" href="/furo-purge.min.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
  <!-- <link rel="preload" href="/scroll.css" as="style" onload="this.onload=null;this.rel='stylesheet'"> -->
  <noscript>
   <!-- <link rel='stylesheet' href='/scroll.css' /> -->
   <link href="/one-dark.min.css" rel="stylesheet"/>
   <link href="/furo-purge.min.css" rel="stylesheet"/>
  </noscript>
  <link href="bitmoji_48x48.png" rel="apple-touch-icon" sizes="48x48"/>
  <link href="bitmoji_72x72.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="bitmoji_96x96.png" rel="apple-touch-icon" sizes="96x96"/>
  <link href="bitmoji_144x144.png" rel="apple-touch-icon" sizes="144x144"/>
  <link href="bitmoji_192x192.png" rel="apple-touch-icon" sizes="192x192"/>
  <link href="bitmoji_256x256.png" rel="apple-touch-icon" sizes="256x256"/>
  <link href="bitmoji_384x384.png" rel="apple-touch-icon" sizes="384x384"/>
  <link href="bitmoji_512x512.png" rel="apple-touch-icon" sizes="512x512"/>
  <title>
   Plotly-And-Streamlit
  </title>
  <meta content="article" name="og:type" property="og:type"/>
  <meta content="Nicholas Payne" name="og:author" property="og:author"/>
  <meta content="Nicholas Payne" name="og:site_name" property="og:site_name"/>
  <meta content="#3A5895" name="theme-color"/>
  <meta content="Nicholas Payne" name="og:author" property="og:author"/>
  <meta content="pypeaday@pm.me" name="og:author_email" property="og:author_email"/>
  <meta content="website" name="og:type" property="og:type"/>
  <meta content="I use  At the highest level, streamlit lets you write a python script and call  I I Suffice it to say it For my  See  First step is to initialize some objects t" name="description" property="description"/>
  <meta content="I use  At the highest level, streamlit lets you write a python script and call  I I Suffice it to say it For my  See  First step is to initialize some objects t" name="og:description" property="og:description"/>
  <meta content="I use  At the highest level, streamlit lets you write a python script and call  I I Suffice it to say it For my  See  First step is to initialize some objects t" name="twitter:description" property="twitter:description"/>
  <meta content="Plotly-And-Streamlit | Pypeaday" name="og:title" property="og:title"/>
  <meta content="Plotly-And-Streamlit | Pypeaday" name="twitter:title" property="twitter:title"/>
  <meta content="/static/images/plotly-and-streamlit-og.png" name="og:image" property="og:image"/>
  <meta content="/static/images/plotly-and-streamlit-og.png" name="twitter:image" property="twitter:image"/>
  <meta content="1600" name="og:image:width" property="og:image:width"/>
  <meta content="900" name="og:image:width" property="og:image:width"/>
  <meta content="summary_large_image" name="twitter:card" property="twitter:card"/>
  <meta content="Pypeaday" name="og:site_name" property="og:site_name"/>
  <meta content="@pypeaday" name="twitter:creator" property="twitter:creator"/>
  <meta content="Plotly-And-Streamlit" name="title" property="title"/>
  <meta content="markata 0.2.0" name="generator" property="generator"/>
  <link href="https://pype.dev/plotly-and-streamlit/" rel="canonical"/>
  <meta content="https://pype.dev/plotly-and-streamlit/" name="og:url" property="og:url"/>
  <link href="/manifest.json" rel="manifest"/>
  <meta content="/static/images/plotly-and-streamlit-og_250x140.png" name="og:sm_image" property="og:sm_image"/>
  <meta content="/static/images/plotly-and-streamlit-og_250x140.png" name="og:sm_image" property="og:sm_image"/>
 </head>
 <body>
  <nav>
   <ul>
    <li>
     <a href="/">
      Home
     </a>
    </li>
    <li>
     <a href="/archive/">
      Archive
     </a>
    </li>
    <li>
     <a aria-label="RSS" href="/rss.xml">
      <svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
       <path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
       </path>
      </svg>
     </a>
    </li>
   </ul>
  </nav>
  <article class="blog-post h-entry">
   <!-- <div id='cover-wrapper'>
      <img src='/plotly-and-streamlit.webp' alt='cover image for article' />
    </div> -->
   <div id="title-wrapper">
    <a class="u-url" href="https://pype.dev/plotly-and-streamlit/">
     <h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">
      Plotly-And-Streamlit
     </h1>
    </a>
    <p>
     <time class="dt-published post-date" datetime="2022-03-31" style="text-align:right;z-index:2">
      2022-03-31
     </time>
    </p>
    <div class="h-card p-author" rel="author">
     <div class="content">
      <a class="p-name u-url" href="https://pype.dev/">
       <p>
        <span class="p-given-name">
         Nicholas
        </span>
        <span class="p-family-name">
         Payne
        </span>
       </p>
      </a>
      <p class="p-note">
       Goofing off
       <a href="https://twitter.com/pypeaday">
        @pypeaday
       </a>
      </p>
     </div>
    </div>
    <!-- edit -->
    <p>
     <a alt="edit post url" href="https://github.com/nicpayne713/mental-data-lake/edit/main/pages/blog/plotly-and-streamlit.md" title="edit this post">
      edit
      <span aria-label="" role="img">
       ✏️
      </span>
     </a>
    </p>
   </div>
   <!-- <h2 class='toc'>toc</h2> -->
   <!-- <div class="toc">
<ul>
<li><a href="#abcmeta">ABCMeta</a></li>
</ul>
</div>
 -->
   <div id="post-body">
    <h2 id="streamlit">
     Streamlit
     <a alt="id" class="heading-permalink" href="#streamlit" title="link to #streamlit">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     I use
     <code>
      streamlit
     </code>
     for any EDA I ever have to do at work.
It's super easy to spin up a small dashboard to filter and view dataframes in, live, without the fallbacks of Jupyter notebooks (kernels dying, memory bloat, a billion "Untitled N.ipynb" files, etc.)
    </p>
    <p>
     At the highest level, streamlit lets you write a python script and call
     <code>
      streamlit run my_script.py
     </code>
     which will open up a web server with your streamlit stuff. 
The dashboard refreshes whenever you change the script so you can add capabilities in real time, super fast!
    </p>
    <p>
     I'll show an example of using
     <code>
      streamlit
     </code>
     and
     <code>
      plotly
     </code>
     to make a live dashboard to monitor system memory usage with
     <code>
      psutil
     </code>
     .
This is apart of my posts on
     <a href="/psutil">
      psutil
     </a>
     and
     <a href="/deques">
      deques
     </a>
     ...
    </p>
    <p>
     <strong>
      example at the bottom!
     </strong>
    </p>
    <h2 id="plotly">
     Plotly
     <a alt="id" class="heading-permalink" href="#plotly" title="link to #plotly">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     I'm not going to make a big time intro to plotly here - there's a billion resources on the interwebs and the docs are really good.
    </p>
    <p>
     Suffice it to say it's my goto plotting library for basically any and all needs.
I'm currently exploring it for live data streaming as I'm not sure it's the best solution but it's the one I'm familiar with.
    </p>
    <p>
     For my
     <a href="https://github.com/nicpayne713/not-netdata">
      not-netdata
     </a>
     project of visualizing live system resource data I  first need a way of appending data and popping data in and out of an array at every data refresh cycle to keep my plots looking nice with a fixed time window.
    </p>
    <p>
     See
     <a href="/deques">
      deques
     </a>
     for a short intro to the datatype I'm using.
    </p>
    <p>
     First step is to initialize some objects to store data in.
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MutableSequence</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">deque</span><span class="p">)</span>

<span class="n">arr_size</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">data</span><span class="p">[</span><span class="s2">"time"</span><span class="p">]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">arr_size</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s2">"used_memory"</span><span class="p">]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">arr_size</span><span class="p">)</span>
</code></pre>
    </div>
    <p>
     <code>
      data
     </code>
     is a dictionary that I'll store deques in. The dictionary keys will be the type of data, in this case
     <code>
      time
     </code>
     and
     <code>
      used_memory
     </code>
     .
    </p>
    <p>
     I fix an array size,
     <code>
      arr_size
     </code>
     to just 10 for now
    </p>
    <p>
     Then I initialize the values for
     <code>
      time
     </code>
     and
     <code>
      used_memory
     </code>
     as
     <code>
      deque
     </code>
     s of length
     <code>
      arr_size
     </code>
     .
Simple enough!
    </p>
    <p>
     Next is to fill those deques with some relevant data.
I'm not actually sure if this is the best way to do this but here's what I have done so far:
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="k">def</span> <span class="nf">refresh_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">data</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>

    <span class="n">data</span><span class="p">[</span><span class="s2">"time"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()))</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"used_memory"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">memory</span><span class="o">.</span><span class="n">used</span> <span class="o">//</span> <span class="p">(</span><span class="mi">1024</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>

    <span class="n">data</span><span class="p">[</span><span class="s2">"time"</span><span class="p">]</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"used_memory"</span><span class="p">]</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
</code></pre>
    </div>
    <p>
     If you ignore my usage of
     <code>
      global
     </code>
     you'll see that I can just
     <code>
      append
     </code>
     to each deque like it was a list.
    </p>
    <p>
     But then to keep the relevant data in the deque, and to keep the length fixed, I simply
     <code>
      popleft
     </code>
     to remove the oldest datapoint!
    </p>
    <h2 id="a-trivial-dashboard">
     A trivial dashboard
     <a alt="id" class="heading-permalink" href="#a-trivial-dashboard" title="link to #a-trivial-dashboard">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     Now I'll prove just how easy it is to get a live data dashboard up and running with just a few lines of code thanks to streamlit!
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">"memory chart"</span><span class="p">)</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">refresh_data</span><span class="p">()</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span>
            <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">x</span><span class="o">=</span><span class="s2">"time"</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="s2">"used_memory"</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Memory usage stored in a deque!"</span><span class="p">,</span>
               <span class="p">)</span>
            <span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</code></pre>
    </div>
    <p>
     <code>
      st
     </code>
     is the streamlit alias (imports shows at the bottom full example).
     <code>
      st.header
     </code>
     puts a nice header on the page.
     <code>
      st.empty
     </code>
     initializes an empty
     <code>
      streamlit container
     </code>
     in which we'll put a
     <code>
      plotly.express
     </code>
     figure.
    </p>
    <p>
     At each iteration we'll
     <code>
      refresh_data()
     </code>
     which
     <code>
      appends
     </code>
     and
     <code>
      pops
     </code>
     data in the deques in the
     <code>
      data
     </code>
     dictionary.
Then we update the
     <code>
      stats
     </code>
     container with a plotly graph and the refresh happens seamlessly.
    </p>
    <p>
     All in all the script looks like this:
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">deque</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">MutableSequence</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">plotly</span> <span class="kn">import</span> <span class="n">express</span> <span class="k">as</span> <span class="n">px</span>
<span class="kn">import</span> <span class="nn">psutil</span>
<span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MutableSequence</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">deque</span><span class="p">)</span>

<span class="n">arr_size</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">data</span><span class="p">[</span><span class="s2">"time"</span><span class="p">]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">arr_size</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s2">"used_memory"</span><span class="p">]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">arr_size</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">refresh_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">data</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>

    <span class="n">data</span><span class="p">[</span><span class="s2">"time"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()))</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"used_memory"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">memory</span><span class="o">.</span><span class="n">used</span> <span class="o">//</span> <span class="p">(</span><span class="mi">1024</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>

    <span class="n">data</span><span class="p">[</span><span class="s2">"time"</span><span class="p">]</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"used_memory"</span><span class="p">]</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">memory_chart</span><span class="p">():</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">"time"</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">"used_memory"</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Memory usage stored in a deque!"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">"memory chart"</span><span class="p">)</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">refresh_data</span><span class="p">()</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">memory_chart</span><span class="p">())</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</code></pre>
    </div>
    <p>
     You can save this as
     <code>
      my_dash.py
     </code>
     and run with
     <code>
      streamlit run my_dash.py
     </code>
     and should see something like the following!
    </p>
    <p>
     <img alt="Alt Text" src="/images/plotly-streamlit.gif" title="plotly-streamlit-gif"/>
    </p>
   </div>
   <hr/>
   <div id="show">
   </div>
  </article>
  <footer>
   <ul class="social">
    <li>
     <a href="https://twitter.com/pypeaday">
      twitter
     </a>
    </li>
    <li>
     <a href="https://www.linkedin.com/in/nicpayne713/">
      LinkedIn
     </a>
    </li>
    <li>
     <a href="https://github.com/nicpayne713">
      GitHub
     </a>
    </li>
    <li>
     <a href="https://www.twitch.tv/pypeaday">
      twitch
     </a>
    </li>
   </ul>
   <p>
    © 2022 - 2022
   </p>
  </footer>
 </body>
</html>